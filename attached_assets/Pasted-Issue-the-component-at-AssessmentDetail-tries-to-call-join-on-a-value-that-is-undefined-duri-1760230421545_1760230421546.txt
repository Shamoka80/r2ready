Issue: the component at `AssessmentDetail` tries to call `.join` on a value that is `undefined` during render. In React this usually happens when client code assumes an array or the Node `path.join` API exists in the browser. Your error points to line ~42 where a `.join` is invoked before data or segments are defined.

Permanent fix plan:

1. Remove server-only APIs from client bundles

* Audit for `path.join` or any Node core module used in pages/components.
* Replace URL building with simple string concatenation logic that does not rely on Node.
* Keep all Node utilities in server code only.

2. Make render paths null-safe and data-aware

* Gate rendering on loading and error states so the component never executes logic on `undefined` data.
* Treat all list-like props and fields as optional and default them to empty arrays before usage.
* Do not call array methods until data is confirmed present.

3. Enforce runtime contracts at boundaries

* Validate API/query results when they enter the component layer (e.g., with a schema validator) and coerce missing array fields to `[]`.
* Normalize optional fields in a single place (query/mapping layer) so components see consistent shapes.

4. Strengthen typing to prevent regressions

* In TypeScript, type the props/queries so list fields are `T[]` rather than `T[] | undefined` after normalization.
* Prohibit `any` and enable strict null checks so calling `.join` on maybe-undefined becomes a compile-time error.

5. Add defensive UX and observability

* Ensure the route renders a clear loading view until data is ready.
* Add an error boundary message that includes the route and assessment id for faster triage.
* Log a breadcrumb when normalization replaces `undefined` with `[]` to catch upstream data issues.

6. Targeted fix in this module

* Identify each `.join` in `AssessmentDetail` and upstream helpers. Confirm the variable is always an array at the point of use.
* If the intent was URL assembly, replace Node `path.join` usage with browser-safe string assembly and unit-test it.
* If the intent was joining tags/crumbs/classes, ensure those collections are initialized by the data mapper before reaching the component.

Verification:

* Reproduce by loading the route with empty/missing fields in mock data; component must render without throwing.
* Run the production build and exercise the route; no “reading 'join'” errors in console or error boundary.
* Add a test that renders `AssessmentDetail` with `tags`, `crumbs`, or `extraClasses` omitted and confirms stable output.

Acceptance criteria:

* No Node core modules imported anywhere in client components.
* All list fields consumed by `AssessmentDetail` are defined arrays at render time.
* Loading and error states block render of data-dependent UI.
* TypeScript strict mode passes with no `any` or nullable array usages at call sites of `.join`.
* Error rate for this route drops to zero in telemetry for 7 consecutive days.
