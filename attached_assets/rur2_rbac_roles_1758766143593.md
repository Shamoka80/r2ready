# RUR2 RBAC System - Default Roles & Permissions

## **SYSTEM ARCHITECTURE NOTES**

### **Multi-Tenant Isolation**
- Each company/organization operates in completely isolated tenant space
- No cross-tenant data access (except for designated consultant-client relationships)
- Tenant-specific user management, assessments, facilities, and billing

### **Superuser/Admin Exclusions**
- **admin@rur2.com** (Production Superuser) - NOT affected by tenant RBAC
- **test@example.com** (Test Admin Account) - NOT affected by tenant RBAC
- These accounts have system-wide access across all tenants for support/maintenance

---

## **BUSINESS CUSTOMER ROLES**
*For recycling facilities and e-waste companies*

### **1. ACCOUNT OWNER** 
**Role Code:** `business_owner`
**Description:** Primary account holder with full administrative control
**Typical User:** CEO, Operations Director, Business Owner

**Core Permissions:**
- ✅ **Account Management**: Full billing, subscription, plan changes
- ✅ **User Management**: Invite/remove users, assign roles, manage all team members
- ✅ **Facility Management**: Add/edit/delete facilities, assign facility access
- ✅ **Assessment Control**: Create, edit, delete, assign any assessment
- ✅ **Report Access**: Generate, view, download all reports across all facilities
- ✅ **Data Export**: Export all company data, assessment results
- ✅ **Integration Settings**: API access, third-party integrations
- ✅ **Audit Logs**: View all user activity and system logs

**Restrictions:**
- Cannot delete own account (must transfer ownership first)
- Cannot downgrade subscription below current usage limits

---

### **2. FACILITY MANAGER**
**Role Code:** `facility_manager`
**Description:** Manages specific facilities and their compliance activities
**Typical User:** Plant Manager, Site Director, Facility Operations Manager

**Core Permissions:**
- ✅ **Assigned Facility Management**: Full control over assigned facilities only
- ✅ **Assessment Management**: Create, edit, complete assessments for assigned facilities
- ✅ **Team Coordination**: Assign team members to assessments within their facilities
- ✅ **Report Generation**: Generate and download reports for assigned facilities
- ✅ **Progress Tracking**: Monitor assessment completion and compliance status
- ✅ **Evidence Upload**: Attach documents and evidence to assessments
- ✅ **Basic User Management**: Invite users with Compliance Officer or Team Member roles

**Restrictions:**
- ❌ Cannot access other facilities not assigned to them
- ❌ Cannot modify billing or subscription settings
- ❌ Cannot assign Account Owner or Facility Manager roles
- ❌ Cannot delete facilities or critical assessment data

---

### **3. COMPLIANCE OFFICER**
**Role Code:** `compliance_officer`  
**Description:** Subject matter expert responsible for assessment completion and compliance
**Typical User:** Environmental Compliance Manager, EH&S Coordinator, Quality Manager

**Core Permissions:**
- ✅ **Assessment Completion**: Complete assigned assessments and questionnaires
- ✅ **Technical Review**: Review and validate assessment responses
- ✅ **Gap Analysis**: Access gap identification and priority recommendations
- ✅ **Report Viewing**: View and download reports for assessments they're involved in
- ✅ **Evidence Management**: Upload supporting documentation and evidence
- ✅ **Progress Updates**: Update assessment status and completion notes
- ✅ **Compliance Tracking**: Monitor facility compliance status and deadlines

**Restrictions:**
- ❌ Cannot create new assessments (only complete assigned ones)
- ❌ Cannot manage facilities or invite new users
- ❌ Cannot access billing or account settings
- ❌ Cannot delete completed assessments or modify scoring

---

### **4. TEAM MEMBER**
**Role Code:** `team_member`
**Description:** Basic contributor who participates in specific assessment activities
**Typical User:** Department Supervisor, Warehouse Manager, Administrative Staff

**Core Permissions:**
- ✅ **Assessment Participation**: Complete assigned sections of assessments
- ✅ **Information Input**: Provide facility data and operational information
- ✅ **Document Upload**: Attach relevant files to assigned assessment sections
- ✅ **Status Updates**: Update progress on assigned tasks
- ✅ **Basic Reporting**: View assessment progress and their contribution status
- ✅ **Profile Management**: Update personal profile and notification preferences

**Restrictions:**
- ❌ Cannot create or delete assessments
- ❌ Cannot assign roles or invite users
- ❌ Cannot access other facilities' data
- ❌ Cannot generate final reports or access scoring details
- ❌ Cannot modify assessment structure or questions

---

### **5. READ-ONLY VIEWER**
**Role Code:** `viewer`
**Description:** View-only access for stakeholders who need visibility but no editing rights
**Typical User:** Corporate Executive, Board Member, External Auditor, Insurance Representative

**Core Permissions:**
- ✅ **Report Viewing**: View completed assessment reports and summaries
- ✅ **Dashboard Access**: View compliance dashboards and status overviews
- ✅ **Progress Monitoring**: Track assessment completion and facility status
- ✅ **Data Export**: Download reports in PDF format only
- ✅ **Notification Preferences**: Set up alerts for assessment completions

**Restrictions:**
- ❌ Cannot edit any assessment data or responses
- ❌ Cannot access raw assessment data or work-in-progress
- ❌ Cannot invite users or modify any settings
- ❌ Cannot access billing or subscription information
- ❌ Cannot upload files or documents

---

## **CONSULTANT CUSTOMER ROLES**
*For consulting firms and certification bodies*

### **1. CONSULTANT OWNER**
**Role Code:** `consultant_owner`
**Description:** Owner of consulting practice with full control over all clients and consultants
**Typical User:** Consulting Firm Owner, Principal Consultant, CB Director

**Core Permissions:**
- ✅ **Client Management**: Add/remove clients, manage all client relationships
- ✅ **Consultant Team**: Hire/manage all consultant staff and permissions
- ✅ **White-Label Control**: Configure branding, reports, and client-facing materials
- ✅ **Billing Oversight**: Manage subscription, billing, client invoicing
- ✅ **Cross-Client Analytics**: View performance across all client accounts
- ✅ **Business Intelligence**: Access consultant productivity and client success metrics
- ✅ **Integration Management**: Configure APIs, third-party tools, CRM connections
- ✅ **Audit & Compliance**: Full audit logs, compliance tracking across all clients

**Restrictions:**
- Cannot access client internal communications marked as confidential
- Cannot delete client data without explicit client authorization

---

### **2. LEAD CONSULTANT**
**Role Code:** `lead_consultant`
**Description:** Senior consultant managing specific client accounts
**Typical User:** Senior Consultant, Account Manager, Project Lead

**Core Permissions:**
- ✅ **Assigned Client Management**: Full control over assigned client accounts
- ✅ **Assessment Leadership**: Create, manage, and complete assessments for clients
- ✅ **Client Communication**: Direct communication and collaboration with client teams
- ✅ **Report Customization**: Generate branded reports and presentations
- ✅ **Progress Management**: Track project timelines and deliverables
- ✅ **Junior Consultant Oversight**: Assign and manage Associate Consultants on projects
- ✅ **Client Billing**: Track billable hours and project costs

**Restrictions:**
- ❌ Cannot access clients not assigned to them
- ❌ Cannot modify consultant firm settings or branding
- ❌ Cannot hire/fire consultant staff
- ❌ Cannot access cross-client analytics or business intelligence

---

### **3. ASSOCIATE CONSULTANT**
**Role Code:** `associate_consultant`
**Description:** Working consultant who executes assessment and compliance work
**Typical User:** Junior Consultant, Specialist Consultant, Technical Analyst

**Core Permissions:**
- ✅ **Assessment Execution**: Complete assigned assessment sections and analysis
- ✅ **Client Data Input**: Enter facility information and compliance data
- ✅ **Technical Analysis**: Perform gap analysis and compliance evaluation
- ✅ **Report Contribution**: Contribute content to client reports and recommendations
- ✅ **Evidence Review**: Review and validate client documentation
- ✅ **Progress Updates**: Update project status and completion metrics

**Restrictions:**
- ❌ Cannot create new client relationships or projects
- ❌ Cannot communicate directly with clients without Lead approval
- ❌ Cannot generate final reports or deliverables
- ❌ Cannot access billing information or client contracts
- ❌ Cannot modify assessment scoring or critical compliance determinations

---

### **4. CLIENT COLLABORATOR**
**Role Code:** `client_collaborator`
**Description:** Limited role for client representatives to participate in consultant-managed projects
**Typical User:** Client's Compliance Manager, Facility Representative, Project Coordinator

**Core Permissions:**
- ✅ **Data Provision**: Input facility-specific information and operational data
- ✅ **Document Upload**: Provide evidence and supporting documentation
- ✅ **Progress Viewing**: Monitor assessment progress and completion status
- ✅ **Communication**: Participate in project discussions with consultant team
- ✅ **Review & Approval**: Review draft reports and provide feedback
- ✅ **Final Report Access**: Download completed assessments and recommendations

**Restrictions:**
- ❌ Cannot access consultant firm data or other client projects
- ❌ Cannot modify assessment structure or scoring methodology
- ❌ Cannot invite additional users or change permissions
- ❌ Cannot access billing or contract information
- ❌ Limited to read-only access for consultant analysis and recommendations

---

## **PERMISSION MATRIX SUMMARY**

### **Core Permission Categories:**

| Permission Category | Account Owner | Facility Manager | Compliance Officer | Team Member | Viewer | Consultant Owner | Lead Consultant | Associate Consultant | Client Collaborator |
|-------------------|:-------------:|:---------------:|:-----------------:|:-----------:|:------:|:---------------:|:---------------:|:-------------------:|:------------------:|
| **Account/Billing** | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ |
| **User Management** | ✅ | Limited | ❌ | ❌ | ❌ | ✅ | Limited | ❌ | ❌ |
| **Facility Management** | ✅ | Assigned Only | ❌ | ❌ | ❌ | N/A | N/A | N/A | N/A |
| **Client Management** | N/A | N/A | N/A | N/A | N/A | ✅ | Assigned Only | ❌ | ❌ |
| **Assessment Creation** | ✅ | ✅ | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ❌ |
| **Assessment Completion** | ✅ | ✅ | ✅ | Limited | ❌ | ✅ | ✅ | ✅ | Limited |
| **Report Generation** | ✅ | Assigned Only | Limited | ❌ | View Only | ✅ | ✅ | ❌ | View Only |
| **Data Export** | ✅ | Limited | Limited | ❌ | Limited | ✅ | ✅ | ❌ | Limited |
| **White-Label/Branding** | N/A | N/A | N/A | N/A | N/A | ✅ | ❌ | ❌ | ❌ |
| **Audit Logs** | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ | Limited | ❌ | ❌ |

---

## **ROLE ASSIGNMENT RULES**

### **Default Role Assignment:**
- **First user in tenant**: Automatically assigned `Account Owner` or `Consultant Owner`
- **Invited users**: Assigned by user with appropriate permissions
- **Self-registration**: Not allowed - all users must be invited
- **Role inheritance**: None - each user has explicit role assignment

### **Role Change Restrictions:**
- Account/Consultant Owners can assign any role except Owner
- Only one Owner per tenant (must transfer ownership to change)
- Facility Managers can only assign Compliance Officer, Team Member, or Viewer roles
- Lead Consultants can only assign Associate Consultant or Client Collaborator roles

### **Multi-Role Support:**
- Users can have multiple roles across different facilities/clients
- Role permissions are cumulative (highest permission level applies)
- Roles can be facility-specific or organization-wide

### **Deactivation/Removal:**
- Only Account/Consultant Owners can remove users
- Deactivated users retain data association but lose access
- 30-day retention period for compliance and audit requirements

---

## **SECURITY & COMPLIANCE NOTES**

### **Data Isolation:**
- All roles operate within tenant boundaries
- Client Collaborator role creates secure client-consultant data sharing
- No cross-tenant role escalation possible

### **Audit Requirements:**
- All role assignments and changes logged
- Permission usage tracked for compliance reporting
- Regular role review workflows for enterprise accounts

### **Integration Considerations:**
- API access tied to role permissions
- SSO integration supports role mapping
- Third-party tools respect RBAC boundaries

This RBAC system ensures proper separation of concerns while enabling the collaborative workflows needed for R2v3 compliance assessments across both business and consultant use cases.